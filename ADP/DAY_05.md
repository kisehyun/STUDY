---
title: "DAY_05"
author: "kisehyun"
date: '2020 12 2 '
output: html_document
---





# **데이터 결합 및 요약**

## **데이터 결합**

### **rbind** = **행 방향**으로 결합한다.
### **cbind** = **열 방향**으로 결합한다.
### **merge** = **기준 컬럼**의 값이 **같은 행**끼리 묶어서 **병합**한다.


```r
id = c('c02','c04','c05','c10')
name = c('Kim','Park','Yoon','Kwon')

number = c(7,9,10,11)

df1 = data.frame(id = id, name = name)
df2 = data.frame(id = id, number = number)


df = merge(df1, df2, by = 'id') # id 기준으로 병합
df
```

```
##    id name number
## 1 c02  Kim      7
## 2 c04 Park      9
## 3 c05 Yoon     10
## 4 c10 Kwon     11
```


## **데이터 요약**

### **aggregate** = **특정 컬럼**을 기준으로 데이터를 **그룹**지어 **집계함수** 적용
### **aggregate(x, by, function)**
### **aggregate(formula, data, function)**


```r
aggregate(Sepal.Width ~ Species, data = iris, mean) # iris 데이터에서 종별 Sepal.Width 평균
```

```
##      Species Sepal.Width
## 1     setosa       3.428
## 2 versicolor       2.770
## 3  virginica       2.974
```

### **table** = **도수분포표** 제작

#### **Titanic** 데이터로 **도수분포표** 생성

```r
data(Titanic)
str(Titanic)
```

```
##  'table' num [1:4, 1:2, 1:2, 1:2] 0 0 35 0 0 0 17 0 118 154 ...
##  - attr(*, "dimnames")=List of 4
##   ..$ Class   : chr [1:4] "1st" "2nd" "3rd" "Crew"
##   ..$ Sex     : chr [1:2] "Male" "Female"
##   ..$ Age     : chr [1:2] "Child" "Adult"
##   ..$ Survived: chr [1:2] "No" "Yes"
```


```r
df = as.data.frame(Titanic)
str(df)
```

```
## 'data.frame':	32 obs. of  5 variables:
##  $ Class   : Factor w/ 4 levels "1st","2nd","3rd",..: 1 2 3 4 1 2 3 4 1 2 ...
##  $ Sex     : Factor w/ 2 levels "Male","Female": 1 1 1 1 2 2 2 2 1 1 ...
##  $ Age     : Factor w/ 2 levels "Child","Adult": 1 1 1 1 1 1 1 1 2 2 ...
##  $ Survived: Factor w/ 2 levels "No","Yes": 1 1 1 1 1 1 1 1 1 1 ...
##  $ Freq    : num  0 0 35 0 0 0 17 0 118 154 ...
```

```r
table(df$Class) # Class 변수 도수분포표 생성
```

```
## 
##  1st  2nd  3rd Crew 
##    8    8    8    8
```


```r
table(df$Class, df$Survived)
```

```
##       
##        No Yes
##   1st   4   4
##   2nd   4   4
##   3rd   4   4
##   Crew  4   4
```

#### **prop.table**은 **범주형 변수**에 대한 **상대도수(비율)**을 표현
#### **prop.table(table, 1 or 2)** 1은 **행방향** 도수 파악 / 2는 **열방향** 도수 파악


```r
prop.table(table(df$Age, df$Survived))
```

```
##        
##           No  Yes
##   Child 0.25 0.25
##   Adult 0.25 0.25
```


```r
prop.table(table(df$Class, df$Freq), 2)
```

```
##       
##                0         1         3         4         5        11        13
##   1st  0.2500000 1.0000000 0.0000000 1.0000000 1.0000000 0.0000000 0.0000000
##   2nd  0.2500000 0.0000000 0.0000000 0.0000000 0.0000000 1.0000000 0.6666667
##   3rd  0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.3333333
##   Crew 0.5000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 0.0000000
##       
##               14        17        20        35        57        75        76
##   1st  0.0000000 0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000
##   2nd  0.5000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000
##   3rd  0.5000000 1.0000000 0.0000000 1.0000000 0.0000000 1.0000000 1.0000000
##   Crew 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 0.0000000
##       
##               80        89       118       140       154       192       387
##   1st  0.0000000 0.0000000 1.0000000 1.0000000 0.0000000 0.0000000 0.0000000
##   2nd  1.0000000 0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000
##   3rd  0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 0.0000000 1.0000000
##   Crew 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 1.0000000 0.0000000
##       
##              670
##   1st  0.0000000
##   2nd  0.0000000
##   3rd  0.0000000
##   Crew 1.0000000
```


```r
prop.table(table(df$Class, df$Freq), 1)
```

```
##       
##            0     1     3     4     5    11    13    14    17    20    35    57
##   1st  0.250 0.125 0.000 0.125 0.125 0.000 0.000 0.000 0.000 0.000 0.000 0.125
##   2nd  0.250 0.000 0.000 0.000 0.000 0.125 0.250 0.125 0.000 0.000 0.000 0.000
##   3rd  0.000 0.000 0.000 0.000 0.000 0.000 0.125 0.125 0.125 0.000 0.125 0.000
##   Crew 0.500 0.000 0.125 0.000 0.000 0.000 0.000 0.000 0.000 0.125 0.000 0.000
##       
##           75    76    80    89   118   140   154   192   387   670
##   1st  0.000 0.000 0.000 0.000 0.125 0.125 0.000 0.000 0.000 0.000
##   2nd  0.000 0.000 0.125 0.000 0.000 0.000 0.125 0.000 0.000 0.000
##   3rd  0.125 0.125 0.000 0.125 0.000 0.000 0.000 0.000 0.125 0.000
##   Crew 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.125 0.000 0.125
```

### **apply**는 데이터를 **행 혹은 열** 방향으로 함수를 적용한 후 **벡터, 배열, 리스트**로 반환한다.
#### **apply(x, 1 or 2, function)** 1은 **행방향** / 2는 **열방향**


```r
a = matrix(1:12, nrow = 3, ncol = 4)
apply(a, 1, mean)
```

```
## [1] 5.5 6.5 7.5
```
